{"ast":null,"code":"import _asyncToGenerator from\"/home/majimenez/Desktop/proyects/chat/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/majimenez/Desktop/proyects/chat/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/home/majimenez/Desktop/proyects/chat/frontend/node_modules/@babel/runtime/regenerator/index.js\";import React,{useState,useEffect}from'react';import{ControllerHeader}from'./components/ControllerHeader';import{ControllerMessage}from'./components/ControllerMessage';import{ControllerSend}from'./components/ControllerSend';import{server}from'./config';import socketClient from\"socket.io-client\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var socket=socketClient(server);export var Chat=function Chat(){var _useState=useState([{message:'',date:new Date()}]),_useState2=_slicedToArray(_useState,2),listMessages=_useState2[0],setListMessages=_useState2[1];useEffect(function(){var getMessages=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,json;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"\".concat(server,\"/message\"));case 2:response=_context.sent;_context.next=5;return response.json();case 5:json=_context.sent;setListMessages(json);case 7:case\"end\":return _context.stop();}}},_callee);}));return function getMessages(){return _ref.apply(this,arguments);};}();var fetchData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:try{getMessages();socket.on('updatemessage',function(data){getMessages();console.log(\"actualizando mensage\",data);});}catch(error){console.log(\"error\",error);}case 1:case\"end\":return _context2.stop();}}},_callee2);}));return function fetchData(){return _ref2.apply(this,arguments);};}();fetchData();},[]);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"container-chat\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"header\",children:/*#__PURE__*/_jsx(ControllerHeader,{})}),/*#__PURE__*/_jsx(\"div\",{className:\"container-message\",children:/*#__PURE__*/_jsx(ControllerMessage,{messages:listMessages})}),/*#__PURE__*/_jsx(ControllerSend,{setMessages:setListMessages})]})})});};","map":{"version":3,"sources":["/home/majimenez/Desktop/proyects/chat/frontend/src/Chat.js"],"names":["React","useState","useEffect","ControllerHeader","ControllerMessage","ControllerSend","server","socketClient","socket","Chat","message","date","Date","listMessages","setListMessages","getMessages","fetch","response","json","fetchData","on","data","console","log","error"],"mappings":"+YAAA,MAAOA,CAAAA,KAAP,EAAcC,QAAd,CAAuBC,SAAvB,KAAuC,OAAvC,CACA,OAASC,gBAAT,KAAiC,+BAAjC,CACA,OAASC,iBAAT,KAAkC,gCAAlC,CACA,OAASC,cAAT,KAA+B,6BAA/B,CACA,OAAQC,MAAR,KAAqB,UAArB,CACA,MAAOC,CAAAA,YAAP,KAA0B,kBAA1B,C,6IACA,GAAMC,CAAAA,MAAM,CAAGD,YAAY,CAAED,MAAF,CAA3B,CAEA,MAAO,IAAMG,CAAAA,IAAI,CAAE,QAANA,CAAAA,IAAM,EAAI,CACrB,cAAwCR,QAAQ,CAAC,CAAC,CAACS,OAAO,CAAE,EAAV,CAAcC,IAAI,CAAE,GAAIC,CAAAA,IAAJ,EAApB,CAAD,CAAD,CAAhD,wCAAOC,YAAP,eAAqBC,eAArB,eACAZ,SAAS,CAAC,UAAM,CAEd,GAAMa,CAAAA,WAAW,0FAAG,2KACKC,CAAAA,KAAK,WAAIV,MAAJ,aADV,QACZW,QADY,qCAECA,CAAAA,QAAQ,CAACC,IAAT,EAFD,QAEZA,IAFY,eAGlBJ,eAAe,CAACI,IAAD,CAAf,CAHkB,sDAAH,kBAAXH,CAAAA,WAAW,0CAAjB,CAKA,GAAMI,CAAAA,SAAS,2FAAG,wIACd,GAAI,CAEFJ,WAAW,GACTP,MAAM,CAACY,EAAP,CAAU,eAAV,CAA2B,SAACC,IAAD,CAAQ,CACjCN,WAAW,GACXO,OAAO,CAACC,GAAR,CAAY,sBAAZ,CAAmCF,IAAnC,EACD,CAHD,EAKH,CAAC,MAAOG,KAAP,CAAc,CACZF,OAAO,CAACC,GAAR,CAAY,OAAZ,CAAqBC,KAArB,EACH,CAXa,wDAAH,kBAATL,CAAAA,SAAS,2CAAf,CAcAA,SAAS,GACZ,CAtBU,CAsBR,EAtBQ,CAAT,CAwBA,mBACE,sCACE,YAAK,SAAS,CAAC,gBAAf,uBACC,aAAK,SAAS,CAAC,WAAf,wBACE,YAAK,SAAS,CAAC,QAAf,uBACC,KAAC,gBAAD,IADD,EADF,cAIC,YAAK,SAAS,CAAC,mBAAf,uBACA,KAAC,iBAAD,EAAoB,QAAQ,CAAEN,YAA9B,EADA,EAJD,cAOC,KAAC,cAAD,EAAgB,WAAW,CAAEC,eAA7B,EAPD,GADD,EADF,EADF,CAgBD,CA1CM","sourcesContent":["import React,{useState,useEffect} from 'react';\nimport { ControllerHeader } from './components/ControllerHeader';\nimport { ControllerMessage } from './components/ControllerMessage';\nimport { ControllerSend } from './components/ControllerSend';\nimport {server} from './config'\nimport socketClient  from \"socket.io-client\";\nconst socket = socketClient (server);\n\nexport const Chat =()=>{\n  const [listMessages, setListMessages] = useState([{message: '', date: new Date()}])\n  useEffect(() => {\n\n    const getMessages = async()=>{\n      const response = await fetch(`${server}/message`);\n      const json = await response.json();\n      setListMessages(json)\n    }\n    const fetchData = async () => {\n        try {\n\n          getMessages()\n            socket.on('updatemessage', (data)=>{\n              getMessages()\n              console.log(\"actualizando mensage\",data)\n            });\n           \n        } catch (error) {\n            console.log(\"error\", error);\n        }\n    };\n\n    fetchData();\n}, []);\n  \n  return (\n    <>\n      <div className=\"container-chat\">\n       <div className=\"container\">\n         <div className=\"header\">\n          <ControllerHeader />\n         </div>\n        <div className=\"container-message\">\n        <ControllerMessage  messages={listMessages} />\n        </div>\n        <ControllerSend setMessages={setListMessages} />\n       </div>\n       \n      </div>\n    </>\n  )\n}"]},"metadata":{},"sourceType":"module"}